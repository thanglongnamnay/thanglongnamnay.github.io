"use strict";const DISTRIBUTE_INTERVAL=1e3;let worker1,worker2,isWorking=!1;const inputs={a:document.getElementById("a-input"),c:document.getElementById("c-input"),m:document.getElementById("m-input"),x:document.getElementById("X0-input")};let random=LCG(inputs.a.value>>>0,inputs.c.value>>>0,inputs.m.value>>>0,inputs.x.value>>>0);const nextNumberLabel=document.getElementById("next-number"),averageSpan=document.getElementById("average-span");function drawChart(){document.getElementById("chartContainer").style.height="90vh",document.getElementById("watermark-notice").hidden=!1;const e=new CanvasJS.Chart("chartContainer",{animationEnabled:!0,zoomEnabled:!0,theme:"dark1",toolTip:{enabled:!1},title:{text:"Distribution chart with "+DISTRIBUTE_INTERVAL+" intervals"},data:[{type:"area",dataPoints:[]}]});return e.render(),scrollBy({top:9999,behavior:"smooth"}),e}function redrawChart(e,t,n){let r=[];for(let e=0;e<t.length;++e)r[e]={x:e/DISTRIBUTE_INTERVAL,y:t[e]/n};e.options.data[0].dataPoints=r,e.render()}function start(){if(isWorking)return;isWorking=!0,worker1=new Worker("worker.min.js"),worker2=new Worker("worker.min.js");const e=drawChart(),t={inputs:{a:inputs.a.value>>>0,c:inputs.c.value>>>0,m:inputs.m.value>>>0,x:inputs.x.value>>>0}};random=LCG(t.inputs.a,t.inputs.c,t.inputs.m,t.inputs.x),worker1.postMessage({...t,fuckingThingTodo:"average"});worker1.onmessage=e=>averageSpan.innerText="Average = "+e.data.average;let n=new Array(DISTRIBUTE_INTERVAL);if(window.SharedArrayBuffer){const r=new SharedArrayBuffer(4*DISTRIBUTE_INTERVAL);n=new Uint32Array(r),worker2.postMessage({...t,fuckingThingTodo:"distribution2",distributionBuffer:r});const o=t=>redrawChart(e,n,t.data);worker2.onmessage=o}else{worker2.postMessage({...t,fuckingThingTodo:"distribution1",distribution:n});const r=t=>redrawChart(e,t.data.distribution,t.data.sum);worker2.onmessage=r}}function stop(){worker1.terminate(),worker2.terminate(),worker1=void 0,worker2=void 0,isWorking=!1}function LCG(e,t,n,r){return function(){return(r=(e*r+t)%n)/n}}function next(){nextNumberLabel.innerText=random()}document.getElementById("start-function").onclick=start,document.getElementById("stop-function").onclick=stop,document.getElementById("next-function").onclick=next;